{namespace sic=SICOR\SicAddress\ViewHelpers}
{namespace core=TYPO3\CMS\Core\ViewHelpers}

<f:layout name="Default" />

<f:section name="content">
    <h2><f:translate key="BackendListTitle" />
        <span class="btn btn-default sortableHandle ui-sortable-handle field-new" title="Add new property" onclick="SicAddress.addPropertyClicked()">
            <core:icon identifier="actions-add" />
        </span>
    </h2>

    <f:if condition="{errorMessages}">
        <f:then>
            <f:for each="{errorMessages}" as="message">
                <div class="alert alert-danger">{message}</div>
            </f:for>
        </f:then>
    </f:if>

    <div class="container-fluid table">

        <div class="panel-group panel-hover ui-sortable" data-title="Properties" id="sic_address_properties">
            <f:if condition="{properties}">
                <f:for each="{properties}" as="property">
                    <f:if condition="{property.external} == '0'">
                        <f:render partial="Property/Form" arguments="{_all}" />
                    </f:if>
                </f:for>
            </f:if>
            <f:render partial="Property/Form" arguments="{_all}" />
        </div>

        <f:form id="sortingForm" target="sortingIframe" controller="DomainProperty" action="sort">
            <f:form.hidden class="sorting" name="ordered" value="" />
        </f:form>
               
    </div>
    <hr />

    <div class="row">
        <div class="col-sm-4">
            <f:link.action id="generateAction" class="btn btn-primary" action="create">Generate Model, TCA, i18n, DB</f:link.action>
            <f:link.external class="btn btn-success" target="sicor" uri="https://www.sicor-kdl.net/index.php?id=111"><f:translate key="HelpButtonLabel"/></f:link.external>
        </div>
        <div class="col-sm-2 col-sm-offset-5">
            <a
                    data-delete-uri="{f:uri.action(action:'deleteFieldDefinitions',arguments:'{external : \'0\'}')}"
                    class="btn btn-danger delete"
                    data-modal-title="{f:translate(key:'Attention')}"
                    data-modal-type="error"
                    data-modal-content="{f:translate(key:'DeleteCustomFieldsLabel')}"
                    data-modal-button-cancel="{f:translate(key:'Cancel')}"
                    data-modal-button-delete="{f:translate(key:'Delete')}"
            >
                <f:translate key='DeleteCustomFieldsLabel'/>
            </a>
        </div>
    </div>

    <h2><f:translate key="BackendImporterListTitle" /></h2>

    <f:form action="importTTAddress" controller="Import">
        <f:form.submit class="btn btn-primary {f:if(condition:'{ttAddressMapping}',then:'',else:'disabled')}" value="<f:translate key='BackendImporterButtonLabel'/>" />
        <a
                data-delete-uri="{f:uri.action(action:'deleteFieldDefinitions',arguments:'{external : \'1\'}')}"
                class="btn btn-danger delete {f:if(condition:'{ttAddressMapping}',then:'',else:'disabled')}"
                data-modal-title="{f:translate(key:'Attention')}"
                data-modal-type="error"
                data-modal-content="{f:translate(key:'DeleteTTAddressFieldsLabel')}"
                data-modal-button-cancel="{f:translate(key:'Cancel')}"
                data-modal-button-delete="{f:translate(key:'Delete')}"
        >
            <f:translate key='DeleteTTAddressFieldsLabel'/>
        </a>
    </f:form>
    
</f:section>
