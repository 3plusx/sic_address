<f:if condition="{address.image}">
    <f:for each="{address.image}" as="image">
        <f:if condition="{address.clickenlarge}">
            <f:then>
                <a href="{image.originalResource.publicUrl}" class="lightbox">
                    <f:render section="image" arguments="{_all}" />
                </a>
            </f:then>
            <f:else>
                <f:if condition="{settings.clickenlarge}">
                    <f:then>
                        <a href="{image.originalResource.publicUrl}" class="lightbox">
                            <f:render section="image" arguments="{_all}" />
                        </a>
                    </f:then>
                    <f:else>
                        <f:if condition="{image.originalResource.link}">
                            <f:then>
                                <f:link.typolink parameter="{image.originalResource.link}" target="_blank">
                                    <f:render section="image" arguments="{_all}" />
                                </f:link.typolink>
                            </f:then>
                            <f:else>
                                <f:render section="image" arguments="{_all}" />
                            </f:else>
                        </f:if>
                    </f:else>
                </f:if>
            </f:else>
        </f:if>
    </f:for>
</f:if>

<f:section name="image">
    <f:image image="{image}"
             width="{f:if(condition:'{imageWidth}',then:'{imageWidth}',else:'120c')}"
             height="{f:if(condition:'{imageHeight}',then:'{imageHeight}',else:'')}" />
</f:section>
